# Love & Complaints App

A romantic and playful relationship app for managing complaints and compensations between partners. Built with React, Supabase, and TailwindCSS.

## Features

- User switching between Vish and Sabaa (no authentication required)
- Complaint management with mood indicators and escalation status
- Threaded replies with emoji reactions
- Compensation system with scratch card mechanic
- Role-based permissions for different actions

## Setup

1. Clone the repository
2. Install dependencies:
   ```bash
   npm install
   ```

3. Create a new Supabase project at https://supabase.com

4. Create the following tables in your Supabase database:

   ```sql
   -- Users (for reference only, no auth required)
   create type user_name as enum ('Vish', 'Sabaa');

   -- Complaints
   create table complaints (
     id bigint generated by default as identity primary key,
     user_name user_name not null,
     title text not null,
     description text not null,
     mood text not null,
     escalated boolean not null default false,
     resolved boolean not null default false,
     created_at timestamp with time zone not null default now()
   );

   -- Replies
   create table replies (
     id bigint generated by default as identity primary key,
     complaint_id bigint references complaints(id) on delete cascade,
     user_name user_name not null,
     text text not null,
     parent_reply_id bigint references replies(id),
     created_at timestamp with time zone not null default now()
   );

   -- Reactions
   create table reactions (
     id bigint generated by default as identity primary key,
     reply_id bigint references replies(id) on delete cascade,
     user_name user_name not null,
     emoji text not null,
     created_at timestamp with time zone not null default now(),
     unique(reply_id, user_name, emoji)
   );

   -- Compensations
   create table compensations (
     id bigint generated by default as identity primary key,
     title text not null,
     description text not null,
     created_by user_name not null check (created_by = 'Sabaa'),
     created_at timestamp with time zone not null default now()
   );

   -- Offered Compensations
   create table offered_compensations (
     id bigint generated by default as identity primary key,
     complaint_id bigint references complaints(id) on delete cascade,
     compensation_id bigint references compensations(id) on delete cascade,
     scratched boolean not null default false,
     selected boolean not null default false,
     "order" int not null check ("order" between 1 and 5),
     created_at timestamp with time zone not null default now()
   );

   -- Fulfilled Compensations
   create table fulfilled_compensations (
     id bigint generated by default as identity primary key,
     offered_compensation_id bigint references offered_compensations(id) on delete cascade,
     fulfilled_by user_name not null check (fulfilled_by = 'Vish'),
     fulfilled_at timestamp with time zone not null default now()
   );
   ```

5. Create a `.env` file in the root directory with your Supabase credentials:
   ```
   VITE_SUPABASE_URL=your_supabase_url
   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
   ```

6. Start the development server:
   ```bash
   npm run dev
   ```

## Usage

1. Use the user switcher in the header to toggle between Vish and Sabaa
2. As Sabaa:
   - Create and manage complaints
   - Create and manage compensations
   - Scratch and select offered compensations
   - Resolve complaints
3. As Vish:
   - View complaints and reply
   - Offer compensations (up to 5 per complaint)
   - Fulfill selected compensations

## Technologies Used

- React.js
- TypeScript
- Supabase
- TailwindCSS
- Framer Motion
- Vite
